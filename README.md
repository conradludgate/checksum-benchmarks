# checksum benchmarks

Benchmark of various checksum algorithms (specifically, rust implementations).

* 32bit: `adler32`, `crc32`
* 128bit: `md5`
* 160bit: `sha1`
* 256bit: `sha2_256`, `sha3_256`, `blake2s`, `blake3`
* 384bit: `sha2_384`, `sha3_384`
* 512bit: `blake2b`, `sha2_512`, `sha3_512`

Run with
```sh
RUSTFLAGS="-C target-cpu=native" DIVAN_SAMPLE_COUNT=10000 cargo +nightly bench
```

I've tried to use the most efficient checksum/hash function implementation in each case.

* sha1/sha2 will try to use hardware acceleration.
* blake3_mt will use rayon for parallelism

## Results

### Apple Macbook Pro M2 Max (aarch64-apple-darwin)

```
crc32     - 8.70 GB/s
blake3_mt - 7.87 GB/s
adler     - 5.76 GB/s
sha2_256  - 2.38 GB/s
sha1      - 2.35 GB/s
blake3    - 2.01 GB/s
sha2_384  - 1.58 GB/s
sha2_512  - 1.58 GB/s
blake2b   - 1.14 GB/s
md5       -  653 MB/s
blake2s   -  684 MB/s
sha3_256  -  625 MB/s
sha3_384  -  479 MB/s
sha3_512  -  334 MB/s
```

<details>
<summary>Expand full test info</summary>

```
Timer precision: 41 ns
checksums            fastest       │ slowest       │ median        │ mean          │ samples │ iters
├─ crypto                          │               │               │               │         │
│  ├─ blake                        │               │               │               │         │
│  │  ├─ blake2b                   │               │               │               │         │
│  │  │  ├─ 4096     3.749 µs      │ 41.91 µs      │ 5.207 µs      │ 5.83 µs       │ 10000   │ 10000
│  │  │  │           1.092 GB/s    │ 97.71 MB/s    │ 786.5 MB/s    │ 702.5 MB/s    │         │
│  │  │  ├─ 16384    14.12 µs      │ 50.08 µs      │ 14.24 µs      │ 14.97 µs      │ 10000   │ 10000
│  │  │  │           1.159 GB/s    │ 327.1 MB/s    │ 1.149 GB/s    │ 1.093 GB/s    │         │
│  │  │  ├─ 65536    56.58 µs      │ 179.7 µs      │ 56.83 µs      │ 57.64 µs      │ 10000   │ 10000
│  │  │  │           1.158 GB/s    │ 364.5 MB/s    │ 1.153 GB/s    │ 1.136 GB/s    │         │
│  │  │  ╰─ 1048576  907.7 µs      │ 2.162 ms      │ 912 µs        │ 918.2 µs      │ 10000   │ 10000
│  │  │              1.155 GB/s    │ 484.8 MB/s    │ 1.149 GB/s    │ 1.141 GB/s    │         │
│  │  ├─ blake2s                   │               │               │               │         │
│  │  │  ├─ 4096     5.874 µs      │ 21.04 µs      │ 5.999 µs      │ 6.17 µs       │ 10000   │ 10000
│  │  │  │           697.2 MB/s    │ 194.6 MB/s    │ 682.7 MB/s    │ 663.7 MB/s    │         │
│  │  │  ├─ 16384    23.66 µs      │ 44.83 µs      │ 23.83 µs      │ 24.15 µs      │ 10000   │ 10000
│  │  │  │           692.3 MB/s    │ 365.4 MB/s    │ 687.4 MB/s    │ 678.3 MB/s    │         │
│  │  │  ├─ 65536    95.08 µs      │ 143.6 µs      │ 95.33 µs      │ 96.65 µs      │ 10000   │ 10000
│  │  │  │           689.2 MB/s    │ 456.1 MB/s    │ 687.4 MB/s    │ 678 MB/s      │         │
│  │  │  ╰─ 1048576  1.523 ms      │ 1.833 ms      │ 1.527 ms      │ 1.532 ms      │ 10000   │ 10000
│  │  │              688.4 MB/s    │ 571.7 MB/s    │ 686.3 MB/s    │ 684.1 MB/s    │         │
│  │  ├─ blake3                    │               │               │               │         │
│  │  │  ├─ 4096     2.04 µs       │ 28.29 µs      │ 2.124 µs      │ 2.23 µs       │ 10000   │ 10000
│  │  │  │           2.007 GB/s    │ 144.7 MB/s    │ 1.927 GB/s    │ 1.836 GB/s    │         │
│  │  │  ├─ 16384    8.082 µs      │ 26.7 µs       │ 8.207 µs      │ 8.379 µs      │ 10000   │ 10000
│  │  │  │           2.027 GB/s    │ 613.4 MB/s    │ 1.996 GB/s    │ 1.955 GB/s    │         │
│  │  │  ├─ 65536    32.33 µs      │ 56.04 µs      │ 32.45 µs      │ 32.78 µs      │ 10000   │ 10000
│  │  │  │           2.026 GB/s    │ 1.169 GB/s    │ 2.019 GB/s    │ 1.999 GB/s    │         │
│  │  │  ╰─ 1048576  518.2 µs      │ 730.6 µs      │ 518.7 µs      │ 522.3 µs      │ 10000   │ 10000
│  │  │              2.023 GB/s    │ 1.435 GB/s    │ 2.021 GB/s    │ 2.007 GB/s    │         │
│  │  ╰─ blake3_mt                 │               │               │               │         │
│  │     ├─ 4096     2.082 µs      │ 8.562 µs      │ 2.124 µs      │ 2.172 µs      │ 10000   │ 20000
│  │     │           1.966 GB/s    │ 478.3 MB/s    │ 1.927 GB/s    │ 1.885 GB/s    │         │
│  │     ├─ 16384    8.499 µs      │ 229.5 µs      │ 22.83 µs      │ 28.98 µs      │ 10000   │ 10000
│  │     │           1.927 GB/s    │ 71.37 MB/s    │ 717.5 MB/s    │ 565.1 MB/s    │         │
│  │     ├─ 65536    15.04 µs      │ 285.2 µs      │ 38.33 µs      │ 42.38 µs      │ 10000   │ 10000
│  │     │           4.357 GB/s    │ 229.7 MB/s    │ 1.709 GB/s    │ 1.546 GB/s    │         │
│  │     ╰─ 1048576  74.16 µs      │ 615.2 µs      │ 117.4 µs      │ 133.1 µs      │ 10000   │ 10000
│  │                 14.13 GB/s    │ 1.704 GB/s    │ 8.93 GB/s     │ 7.872 GB/s    │         │
│  ├─ md                           │               │               │               │         │
│  │  ╰─ md5                       │               │               │               │         │
│  │     ├─ 4096     6.124 µs      │ 19.87 µs      │ 6.291 µs      │ 6.437 µs      │ 10000   │ 10000
│  │     │           668.7 MB/s    │ 206 MB/s      │ 651 MB/s      │ 636.2 MB/s    │         │
│  │     ├─ 16384    24.45 µs      │ 75.04 µs      │ 25.08 µs      │ 25.24 µs      │ 10000   │ 10000
│  │     │           669.8 MB/s    │ 218.3 MB/s    │ 653.1 MB/s    │ 649 MB/s      │         │
│  │     ├─ 65536    97.7 µs       │ 166.7 µs      │ 100.2 µs      │ 100.7 µs      │ 10000   │ 10000
│  │     │           670.7 MB/s    │ 392.9 MB/s    │ 653.9 MB/s    │ 650.7 MB/s    │         │
│  │     ╰─ 1048576  1.562 ms      │ 1.849 ms      │ 1.604 ms      │ 1.604 ms      │ 10000   │ 10000
│  │                 671.2 MB/s    │ 567 MB/s      │ 653.3 MB/s    │ 653.4 MB/s    │         │
│  ╰─ sha                          │               │               │               │         │
│     ├─ sha1                      │               │               │               │         │
│     │  ├─ 4096     1.718 µs      │ 5.489 µs      │ 1.749 µs      │ 1.782 µs      │ 10000   │ 40000
│     │  │           2.383 GB/s    │ 746.1 MB/s    │ 2.341 GB/s    │ 2.297 GB/s    │         │
│     │  ├─ 16384    6.832 µs      │ 38.79 µs      │ 6.916 µs      │ 7.1 µs        │ 10000   │ 10000
│     │  │           2.397 GB/s    │ 422.3 MB/s    │ 2.368 GB/s    │ 2.307 GB/s    │         │
│     │  ├─ 65536    27.41 µs      │ 49.04 µs      │ 27.54 µs      │ 27.87 µs      │ 10000   │ 10000
│     │  │           2.39 GB/s     │ 1.336 GB/s    │ 2.379 GB/s    │ 2.351 GB/s    │         │
│     │  ╰─ 1048576  440 µs        │ 566.9 µs      │ 440.3 µs      │ 444.3 µs      │ 10000   │ 10000
│     │              2.382 GB/s    │ 1.849 GB/s    │ 2.381 GB/s    │ 2.359 GB/s    │         │
│     ├─ sha2_256                  │               │               │               │         │
│     │  ├─ 4096     1.697 µs      │ 17.26 µs      │ 1.728 µs      │ 1.769 µs      │ 10000   │ 40000
│     │  │           2.412 GB/s    │ 237.3 MB/s    │ 2.369 GB/s    │ 2.315 GB/s    │         │
│     │  ├─ 16384    6.749 µs      │ 27.33 µs      │ 6.874 µs      │ 7.021 µs      │ 10000   │ 10000
│     │  │           2.427 GB/s    │ 599.4 MB/s    │ 2.383 GB/s    │ 2.333 GB/s    │         │
│     │  ├─ 65536    27.16 µs      │ 48.99 µs      │ 27.37 µs      │ 27.71 µs      │ 10000   │ 10000
│     │  │           2.412 GB/s    │ 1.337 GB/s    │ 2.394 GB/s    │ 2.364 GB/s    │         │
│     │  ╰─ 1048576  434.8 µs      │ 541.7 µs      │ 437.3 µs      │ 439.8 µs      │ 10000   │ 10000
│     │              2.411 GB/s    │ 1.935 GB/s    │ 2.397 GB/s    │ 2.383 GB/s    │         │
│     ├─ sha2_384                  │               │               │               │         │
│     │  ├─ 4096     2.582 µs      │ 21.91 µs      │ 2.666 µs      │ 2.755 µs      │ 10000   │ 10000
│     │  │           1.586 GB/s    │ 186.8 MB/s    │ 1.536 GB/s    │ 1.486 GB/s    │         │
│     │  ├─ 16384    10.29 µs      │ 26.87 µs      │ 10.41 µs      │ 10.61 µs      │ 10000   │ 10000
│     │  │           1.592 GB/s    │ 609.6 MB/s    │ 1.573 GB/s    │ 1.544 GB/s    │         │
│     │  ├─ 65536    41.2 µs       │ 145.8 µs      │ 41.29 µs      │ 41.89 µs      │ 10000   │ 10000
│     │  │           1.59 GB/s     │ 449.3 MB/s    │ 1.587 GB/s    │ 1.564 GB/s    │         │
│     │  ╰─ 1048576  659.3 µs      │ 816.7 µs      │ 662.4 µs      │ 663.9 µs      │ 10000   │ 10000
│     │              1.59 GB/s     │ 1.283 GB/s    │ 1.582 GB/s    │ 1.579 GB/s    │         │
│     ├─ sha2_512                  │               │               │               │         │
│     │  ├─ 4096     2.603 µs      │ 9.583 µs      │ 2.666 µs      │ 2.724 µs      │ 10000   │ 20000
│     │  │           1.573 GB/s    │ 427.4 MB/s    │ 1.536 GB/s    │ 1.503 GB/s    │         │
│     │  ├─ 16384    10.29 µs      │ 31.49 µs      │ 10.41 µs      │ 10.57 µs      │ 10000   │ 10000
│     │  │           1.592 GB/s    │ 520.1 MB/s    │ 1.573 GB/s    │ 1.549 GB/s    │         │
│     │  ├─ 65536    41.2 µs       │ 85.91 µs      │ 41.29 µs      │ 41.76 µs      │ 10000   │ 10000
│     │  │           1.59 GB/s     │ 762.7 MB/s    │ 1.587 GB/s    │ 1.569 GB/s    │         │
│     │  ╰─ 1048576  659.3 µs      │ 888.7 µs      │ 662.7 µs      │ 664.7 µs      │ 10000   │ 10000
│     │              1.59 GB/s     │ 1.179 GB/s    │ 1.582 GB/s    │ 1.577 GB/s    │         │
│     ├─ sha3_256                  │               │               │               │         │
│     │  ├─ 4096     6.54 µs       │ 22.24 µs      │ 6.707 µs      │ 6.812 µs      │ 10000   │ 10000
│     │  │           626.2 MB/s    │ 184 MB/s      │ 610.6 MB/s    │ 601.2 MB/s    │         │
│     │  ├─ 16384    25.58 µs      │ 48.2 µs       │ 26.04 µs      │ 26.33 µs      │ 10000   │ 10000
│     │  │           640.4 MB/s    │ 339.8 MB/s    │ 629.1 MB/s    │ 622.1 MB/s    │         │
│     │  ├─ 65536    102.7 µs      │ 151.3 µs      │ 103.5 µs      │ 104.3 µs      │ 10000   │ 10000
│     │  │           638 MB/s      │ 432.9 MB/s    │ 632.6 MB/s    │ 628.1 MB/s    │         │
│     │  ╰─ 1048576  1.657 ms      │ 2.355 ms      │ 1.67 ms       │ 1.677 ms      │ 10000   │ 10000
│     │              632.6 MB/s    │ 445.1 MB/s    │ 627.7 MB/s    │ 625.1 MB/s    │         │
│     ├─ sha3_384                  │               │               │               │         │
│     │  ├─ 4096     8.457 µs      │ 28.2 µs       │ 8.624 µs      │ 8.796 µs      │ 10000   │ 10000
│     │  │           484.2 MB/s    │ 145.2 MB/s    │ 474.9 MB/s    │ 465.6 MB/s    │         │
│     │  ├─ 16384    33.49 µs      │ 63.91 µs      │ 33.91 µs      │ 34.26 µs      │ 10000   │ 10000
│     │  │           489 MB/s      │ 256.3 MB/s    │ 483 MB/s      │ 478.1 MB/s    │         │
│     │  ├─ 65536    134.4 µs      │ 185.9 µs      │ 135.3 µs      │ 136.2 µs      │ 10000   │ 10000
│     │  │           487.4 MB/s    │ 352.3 MB/s    │ 484.1 MB/s    │ 481 MB/s      │         │
│     │  ╰─ 1048576  2.165 ms      │ 2.542 ms      │ 2.177 ms      │ 2.184 ms      │ 10000   │ 10000
│     │              484.2 MB/s    │ 412.3 MB/s    │ 481.5 MB/s    │ 479.9 MB/s    │         │
│     ╰─ sha3_512                  │               │               │               │         │
│        ├─ 4096     11.99 µs      │ 29.7 µs       │ 12.2 µs       │ 12.46 µs      │ 10000   │ 10000
│        │           341.3 MB/s    │ 137.8 MB/s    │ 335.5 MB/s    │ 328.6 MB/s    │         │
│        ├─ 16384    48.12 µs      │ 72.95 µs      │ 48.7 µs       │ 49.28 µs      │ 10000   │ 10000
│        │           340.4 MB/s    │ 224.5 MB/s    │ 336.3 MB/s    │ 332.4 MB/s    │         │
│        ├─ 65536    193.6 µs      │ 266.1 µs      │ 194.4 µs      │ 195.8 µs      │ 10000   │ 10000
│        │           338.3 MB/s    │ 246.2 MB/s    │ 336.9 MB/s    │ 334.6 MB/s    │         │
│        ╰─ 1048576  3.11 ms       │ 3.571 ms      │ 3.126 ms      │ 3.134 ms      │ 10000   │ 10000
│                    337.1 MB/s    │ 293.5 MB/s    │ 335.3 MB/s    │ 334.5 MB/s    │         │
╰─ non_crypto                      │               │               │               │         │
   ├─ adler                        │               │               │               │         │
   │  ├─ 4096        624.5 ns      │ 2.655 µs      │ 645.4 ns      │ 665.1 ns      │ 10000   │ 80000
   │  │              6.557 GB/s    │ 1.542 GB/s    │ 6.345 GB/s    │ 6.157 GB/s    │         │
   │  ├─ 16384       2.52 µs       │ 12.08 µs      │ 2.562 µs      │ 2.632 µs      │ 10000   │ 20000
   │  │              6.5 GB/s      │ 1.356 GB/s    │ 6.394 GB/s    │ 6.222 GB/s    │         │
   │  ├─ 65536       10.79 µs      │ 35.66 µs      │ 11.24 µs      │ 11.48 µs      │ 10000   │ 10000
   │  │              6.073 GB/s    │ 1.837 GB/s    │ 5.825 GB/s    │ 5.705 GB/s    │         │
   │  ╰─ 1048576     171.4 µs      │ 263.5 µs      │ 183.6 µs      │ 181.9 µs      │ 10000   │ 10000
   │                 6.117 GB/s    │ 3.978 GB/s    │ 5.709 GB/s    │ 5.762 GB/s    │         │
   ╰─ crc                          │               │               │               │         │
      ├─ 4096        442.3 ns      │ 3.874 µs      │ 457.9 ns      │ 473.8 ns      │ 10000   │ 80000
      │              9.259 GB/s    │ 1.057 GB/s    │ 8.944 GB/s    │ 8.643 GB/s    │         │
      ├─ 16384       1.812 µs      │ 12.1 µs       │ 1.874 µs      │ 1.96 µs       │ 10000   │ 20000
      │              9.041 GB/s    │ 1.353 GB/s    │ 8.74 GB/s     │ 8.357 GB/s    │         │
      ├─ 65536       7.374 µs      │ 34.37 µs      │ 7.499 µs      │ 7.699 µs      │ 10000   │ 10000
      │              8.886 GB/s    │ 1.906 GB/s    │ 8.738 GB/s    │ 8.511 GB/s    │         │
      ╰─ 1048576     119.5 µs      │ 156.7 µs      │ 119.7 µs      │ 120.4 µs      │ 10000   │ 10000
                     8.768 GB/s    │ 6.687 GB/s    │ 8.759 GB/s    │ 8.702 GB/s    │         │
```

</details>

### AMD Ryzen 9 3900X 12-Core Processor (x86_64-unknown-linux-gnu)

```
crc32    - 15.8 GB/s
adler    - 4.59 GB/s
blake3   - 4.50 GB/s
sha2_256 - 1.96 GB/s
sha1     - 1.80 GB/s
blake2b  -  807 MB/s
```

<details>
<summary>Expand full test info</summary>

```
Timer precision: 20 ns
checksums      fastest       │ slowest       │ median        │ mean          │ samples │ iters
├─ adler                     │               │               │               │         │
│  ├─ 4096     769.7 ns      │ 37.39 µs      │ 779.7 ns      │ 788.3 ns      │ 10000   │ 10000
│  ├─ 16384    2.979 µs      │ 16.75 µs      │ 2.999 µs      │ 3.02 µs       │ 10000   │ 10000
│  ├─ 65536    12.77 µs      │ 51.32 µs      │ 12.87 µs      │ 12.97 µs      │ 10000   │ 10000
│  ╰─ 1048576  209.5 µs      │ 1.055 ms      │ 212.4 µs      │ 217.7 µs      │ 10000   │ 10000
├─ blake2b_32                │               │               │               │         │
│  ├─ 4096     4.829 µs      │ 17.51 µs      │ 4.839 µs      │ 4.875 µs      │ 10000   │ 10000
│  ├─ 16384    19.19 µs      │ 30.61 µs      │ 19.21 µs      │ 19.34 µs      │ 10000   │ 10000
│  ├─ 65536    76.19 µs      │ 112.3 µs      │ 76.7 µs       │ 77.22 µs      │ 10000   │ 10000
│  ╰─ 1048576  1.221 ms      │ 2.129 ms      │ 1.237 ms      │ 1.238 ms      │ 10000   │ 10000
├─ blake3                    │               │               │               │         │
│  ├─ 4096     1.389 µs      │ 29.21 µs      │ 1.409 µs      │ 1.422 µs      │ 10000   │ 10000
│  ├─ 16384    3.529 µs      │ 9.489 µs      │ 3.559 µs      │ 3.583 µs      │ 10000   │ 10000
│  ├─ 65536    13.76 µs      │ 24.98 µs      │ 13.89 µs      │ 14.01 µs      │ 10000   │ 10000
│  ╰─ 1048576  211.9 µs      │ 356.1 µs      │ 222.8 µs      │ 222.2 µs      │ 10000   │ 10000
├─ crc                       │               │               │               │         │
│  ├─ 4096     251 ns        │ 2.617 µs      │ 253.5 ns      │ 256.1 ns      │ 10000   │ 80000
│  ├─ 16384    1.004 µs      │ 6.054 µs      │ 1.009 µs      │ 1.018 µs      │ 10000   │ 20000
│  ├─ 65536    3.949 µs      │ 13.85 µs      │ 3.979 µs      │ 3.998 µs      │ 10000   │ 10000
│  ╰─ 1048576  59.31 µs      │ 101.7 µs      │ 63.28 µs      │ 63.29 µs      │ 10000   │ 10000
├─ sha1                      │               │               │               │         │
│  ├─ 4096     2.209 µs      │ 17.66 µs      │ 2.229 µs      │ 2.242 µs      │ 10000   │ 10000
│  ├─ 16384    8.609 µs      │ 18.16 µs      │ 8.659 µs      │ 8.692 µs      │ 10000   │ 10000
│  ├─ 65536    34.43 µs      │ 45.86 µs      │ 34.44 µs      │ 34.56 µs      │ 10000   │ 10000
│  ╰─ 1048576  543.9 µs      │ 567.9 µs      │ 552.1 µs      │ 552.2 µs      │ 10000   │ 10000
╰─ sha256                    │               │               │               │         │
   ├─ 4096     2.029 µs      │ 11.79 µs      │ 2.039 µs      │ 2.05 µs       │ 10000   │ 10000
   ├─ 16384    7.879 µs      │ 28.27 µs      │ 7.969 µs      │ 8.02 µs       │ 10000   │ 10000
   ├─ 65536    31.32 µs      │ 57.85 µs      │ 31.69 µs      │ 31.96 µs      │ 10000   │ 10000
   ╰─ 1048576  500.4 µs      │ 538.8 µs      │ 508.2 µs      │ 508.9 µs      │ 10000   │ 10000
```

</details>
